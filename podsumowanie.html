<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Podsumowanie ❤️</title>
<style>
body { 
    margin:0; font-family:'Segoe UI', sans-serif; 
    background: linear-gradient(135deg,#ff758c,#ff7eb3); 
    display:flex; justify-content:center; align-items:center; height:100vh; color:white; text-align:center;
}
.container {
    background: rgba(0,0,0,0.3); padding:40px; border-radius:20px; backdrop-filter:blur(10px); width:90%; max-width:500px;
}
button {
    margin:10px;
    padding:12px 25px;
    font-size:16px;
    border-radius:25px;
    border:none;
    cursor:pointer;
    transition:0.3s;
}
button:hover { transform: scale(1.05); }
button#change { background:#f39c12; color:white; }
button#accept { background:#2ecc71; color:white; }
</style>
</head>
<body>

<div class="container">
    <h1>Podsumowanie naszej przygody ❤️</h1>
    <p id="klimat"></p>
    <p id="termin"></p>

    <button id="change">Zmień wybory</button>
    <button id="accept">Akceptuj</button>
</div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const klimat = localStorage.getItem("wybranyKlimat");
const termin = localStorage.getItem("wybranyTermin");

document.getElementById("klimat").textContent = "Wybrany klimat: " + (klimat || "nie wybrano");
document.getElementById("termin").textContent = "Wybrany termin: " + (termin || "nie wybrano");

document.getElementById("change").addEventListener("click", () => {
    // resetuje tylko termin lub wszystko, w zależności co chcesz
    window.location.href = "index.html"; 
});
const supabaseUrl = "https://oubhyvppwjdahpuhmzod.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91Ymh5dnBwd2pkYWhwdWhtem9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2Njg0NDEsImV4cCI6MjA4NzI0NDQ0MX0.Rwc0T0BLLQ616iPEtrQsrwfMUwRurfEGx2ZGCFk5H60";

const { createClient } = supabase;
const db = createClient(supabaseUrl, supabaseKey);

document.getElementById("accept").addEventListener("click", async () => {

    const klimat = localStorage.getItem("wybranyKlimat");
    const termin = localStorage.getItem("wybranyTermin");

    const { error } = await db
        .from("wybory")
        .insert([
            { klimat: klimat, termin: termin }
        ]);

    if (error) {
        console.error("Błąd Supabase:", error);
        alert("Błąd zapisu danych");
    } else {
        window.location.href = "dziekuje.html";
    }
});

    

</script>

</body>
</html>
